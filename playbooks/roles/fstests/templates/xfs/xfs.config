# Automatically generated file by kdevops
[default]
FSTYP=xfs
TEST_DIR={{ fstests_test_dir }}
SCRATCH_MNT={{ fstests_scratch_mnt }}
RESULT_BASE=$PWD/results/$HOST/$(uname -r)
DUMP_CORRUPT_FS=1

# Matches what we expect to be default on the latests xfsprogs
[xfs_crc]
TEST_DEV={{ fstests_test_dev }}
SCRATCH_DEV_POOL="{{ fstests_scratch_devpool }}"
MKFS_OPTIONS='-f -m crc=1,reflink=0,rmapbt=0, -i sparse=0'
USE_EXTERNAL=no
LOGWRITES_DEV={{ fstests_logwrites_dev }}

[xfs_bigblock]
TEST_DEV={{ fstests_test_dev }}
SCRATCH_DEV_POOL="{{ fstests_scratch_devpool }}"
# Can only be used on architectures with a respective 64k page size support
# where its enabled. For instance ppc64 and aarch64. You'll want to use a
# distro which has this enabled on their kernel to test this. For instance:
#
# For ppc64le:
# CONFIG_PPC_64K_PAGES=y
#
# For aarch64:
# CONFIG_ARM64_64K_PAGES=y
MKFS_OPTIONS='-f -b size=65536'
USE_EXTERNAL=no
LOGWRITES_DEV={{ fstests_logwrites_dev }}

[xfs_reflink]
TEST_DEV={{ fstests_test_dev }}
SCRATCH_DEV_POOL="{{ fstests_scratch_devpool }}"
MKFS_OPTIONS='-f -m reflink=1,rmapbt=1, -i sparse=1,'
USE_EXTERNAL=no
LOGWRITES_DEV={{ fstests_logwrites_dev }}

# reflink without online filesystem repair support
[xfs_reflink_normapbt]
TEST_DEV={{ fstests_test_dev }}
SCRATCH_DEV_POOL="{{ fstests_scratch_devpool }}"
MKFS_OPTIONS='-f -m reflink=1,rmapbt=0, -i sparse=1,'
USE_EXTERNAL=no
LOGWRITES_DEV={{ fstests_logwrites_dev }}
FSTYP=xfs

[xfs_reflink_1024]
TEST_DEV={{ fstests_test_dev }}
SCRATCH_DEV_POOL="{{ fstests_scratch_devpool }}"
MKFS_OPTIONS='-f -m reflink=1,rmapbt=1, -i sparse=1, -b size=1024,'
USE_EXTERNAL=no
LOGWRITES_DEV={{ fstests_logwrites_dev }}

# For older kernels when we didn't have crc
[xfs_nocrc]
TEST_DEV={{ fstests_test_dev }}
SCRATCH_DEV_POOL="{{ fstests_scratch_devpool }}"
MKFS_OPTIONS='-f -m crc=0,reflink=0,rmapbt=0, -i sparse=0,'
USE_EXTERNAL=no
LOGWRITES_DEV={{ fstests_logwrites_dev }}

[xfs_nocrc_512]
TEST_DEV={{ fstests_test_dev }}
SCRATCH_DEV_POOL="{{ fstests_scratch_devpool }}"
MKFS_OPTIONS='-f -m crc=0,reflink=0,rmapbt=0, -i sparse=0, -b size=512,'
USE_EXTERNAL=no
LOGWRITES_DEV={{ fstests_logwrites_dev }}

[xfs_logdev]
TEST_DEV={{ fstests_test_dev }}
TEST_LOGDEV={{ fstests_test_logdev }}
SCRATCH_DEV_POOL="{{ fstests_scratch_devpool }}"
MKFS_OPTIONS="-f -m crc=1,reflink=0,rmapbt=0, -i sparse=0 {{ fstests_test_logdev_mkfs_opts }}"
TEST_FS_MOUNT_OPTS="-o logdev={{ fstests_test_logdev }}"
SCRATCH_LOGDEV={{ fstests_scratch_logdev }}
USE_EXTERNAL=yes

[xfs_rtdev]
TEST_DEV={{ fstests_test_dev }}
TEST_RTDEV={{ fstests_test_rtdev }}
TEST_FS_MOUNT_OPTS="-o rtdev={{ fstests_test_rtdev }}"
SCRATCH_DEV_POOL="{{ fstests_scratch_devpool }}"
MKFS_OPTIONS="-f -d rtinherit=1"
SCRATCH_RTDEV={{ fstests_scratch_rtdev }}
